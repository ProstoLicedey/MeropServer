{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mi200\\\\WebstormProjects\\\\Merops\\\\client\\\\src\\\\pages\\\\event\\\\DrawerBuy.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { Button, Drawer, Empty, Space } from \"antd\";\nimport { getEntrance } from \"../../http/entranceAPI\";\nimport { Context } from \"../../index\";\nimport { observer } from \"mobx-react-lite\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport Title from \"antd/es/typography/Title\";\nimport EntranceLine from \"../../components/event/entranceLine\";\nimport { createOrder } from \"../../http/orderAPI\";\nimport Ticket from \"../../services/ticketGenerate/ticket\";\nimport { EVENT_ROUTE } from \"../../utils/consts\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DrawerBuy = ({\n  open,\n  onClose,\n  entranceId\n}) => {\n  _s();\n  const {\n    event,\n    hall,\n    user\n  } = useContext(Context);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (event.event.entranceId) {\n      getEntrance(event.event.entranceId, event.event.id).then(data => hall.setEntrance(data));\n    }\n  }, [event.event]);\n  const addOrder = () => {\n    console.log(user.user);\n    const formData = new FormData();\n    formData.append('userId', user.user.id);\n    formData.append('tickets', JSON.stringify(hall.ticket));\n    createOrder(formData).then(data => {\n      navigate(EVENT_ROUTE + '/' + data.id);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Drawer, {\n    title: \"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0431\\u0438\\u043B\\u0435\\u0442\",\n    placement: \"bottom\",\n    onClose: onClose,\n    open: open,\n    children: [hall.entrance.length === 0 ? /*#__PURE__*/_jsxDEV(Space, {\n      direction: \"vertical\",\n      style: {\n        display: \"flex\",\n        textAlign: 'center',\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: \"\\u041E\\u0448\\u0438\\u0431\\u043E\\u0447\\u043A\\u0430...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Title, {\n        level: 3,\n        children: \"\\u0423\\u0436\\u0435 \\u0447\\u0438\\u043D\\u0438\\u043C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(Space, {\n      direction: \"vertical\",\n      style: {\n        width: '100%'\n      },\n      children: hall.entrance.map(entrance => /*#__PURE__*/_jsxDEV(EntranceLine, {\n        thisEntranceOption: entrance\n      }, entrance.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"primary\",\n      style: {\n        position: 'fixed',\n        bottom: 0,\n        right: 0,\n        backgroundColor: '#722ed1',\n        width: '15em',\n        height: '4em',\n        margin: '20px'\n      },\n      onClick: addOrder,\n      children: \"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n};\n_s(DrawerBuy, \"lYzYyk1qR/BVjxJ7LCjDz72Iosg=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = DrawerBuy;\nexport default _c2 = observer(DrawerBuy);\nvar _c, _c2;\n$RefreshReg$(_c, \"DrawerBuy\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useContext","useEffect","useState","Button","Drawer","Empty","Space","getEntrance","Context","observer","useNavigate","useParams","Title","EntranceLine","createOrder","Ticket","EVENT_ROUTE","jsxDEV","_jsxDEV","DrawerBuy","open","onClose","entranceId","_s","event","hall","user","id","navigate","then","data","setEntrance","addOrder","console","log","formData","FormData","append","JSON","stringify","ticket","title","placement","children","entrance","length","direction","style","display","textAlign","alignItems","justifyContent","fileName","_jsxFileName","lineNumber","columnNumber","level","width","map","thisEntranceOption","type","position","bottom","right","backgroundColor","height","margin","onClick","_c","_c2","$RefreshReg$"],"sources":["C:/Users/mi200/WebstormProjects/Merops/client/src/pages/event/DrawerBuy.js"],"sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\r\nimport {Button, Drawer, Empty, Space} from \"antd\";\r\nimport {getEntrance} from \"../../http/entranceAPI\";\r\nimport {Context} from \"../../index\";\r\nimport {observer} from \"mobx-react-lite\";\r\nimport {useNavigate, useParams} from \"react-router-dom\";\r\nimport Title from \"antd/es/typography/Title\";\r\nimport EntranceLine from \"../../components/event/entranceLine\";\r\nimport {createOrder} from \"../../http/orderAPI\";\r\nimport Ticket from \"../../services/ticketGenerate/ticket\";\r\nimport {EVENT_ROUTE} from \"../../utils/consts\";\r\n\r\nconst DrawerBuy = ({open, onClose, entranceId}) => {\r\n    const { event, hall, user} = useContext(Context);\r\n    const { id } = useParams();\r\n    const navigate = useNavigate()\r\n\r\n    useEffect(() => {\r\n        if(event.event.entranceId){\r\n            getEntrance(event.event.entranceId, event.event.id).then(data => hall.setEntrance(data))\r\n        }\r\n    }, [event.event]);\r\n\r\n    const  addOrder = () =>{\r\n        console.log(user.user)\r\n        const  formData = new FormData\r\n        formData.append('userId', user.user.id)\r\n        formData.append('tickets', JSON.stringify(hall.ticket))\r\n        createOrder(formData).then(data => {\r\n           navigate(EVENT_ROUTE + '/' + data.id)\r\n\r\n        })\r\n    };\r\n\r\n    return (\r\n        <Drawer\r\n            title=\"Выбрать билет\"\r\n            placement=\"bottom\"\r\n            onClose={onClose}\r\n            open={open}\r\n\r\n        >\r\n\r\n            {hall.entrance.length === 0 ? (\r\n                <Space direction=\"vertical\" style={{display: \"flex\", textAlign: 'center', alignItems: 'center',  justifyContent: 'center', }}>\r\n                    <Title>Ошибочка...</Title>\r\n                    <Title level={3}>Уже чиним</Title>\r\n\r\n                </Space>\r\n            ) : (\r\n                <Space direction={\"vertical\"} style={{width:'100%'}}>\r\n                    {hall.entrance.map(entrance =>\r\n                        <EntranceLine key={entrance.id} thisEntranceOption={entrance}/>\r\n                    )}\r\n\r\n                </Space>\r\n            )}\r\n                      <Button\r\n                type=\"primary\"\r\n                style={{\r\n                    position: 'fixed',\r\n                    bottom: 0,\r\n                    right: 0,\r\n                    backgroundColor: '#722ed1',\r\n                    width: '15em',\r\n                    height: '4em',\r\n                    margin: '20px'\r\n                }}\r\n                onClick={addOrder}\r\n            >\r\n                Оформить\r\n            </Button>\r\n        </Drawer>\r\n    );\r\n};\r\n\r\n\r\n\r\nexport default observer(DrawerBuy);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}